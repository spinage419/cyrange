<template>


        <div class="common-layout  main-bkg">
                 <!-- 数据流背景 -->
    <div class="data-stream">
      <span v-for="i in 20" :key="i"></span>
    </div>

          <el-container>
            <el-aside width="300px" style="height: 100vh;">
              <el-scrollbar class="cyber-scrollbar" style="height: 70%;">
                <br>
                <el-row class="tac">
                  <el-col :span="21">
                    <br>
                    <el-menu 
                      :default-active="asideActiveIndex"
                      active-text-color="#fff" 
                      background-color="transparent"
                      :unique-opened="true" 
                      class="el-menu-vertical-demo"
                      text-color="#d1e7ff" 
                      @open="handleOpen"
                      @close="handleClose">
                      
                      <!-- 信息搜集 -->
                      <el-submenu index="1">
                        <template slot="title">
                          <i class="el-icon-info"></i>
                          <span>信息搜集</span>
                        </template>
                        <el-menu-item-group>
                          <el-menu-item index="1-1" @click="goToComponent('infotip', '1-1')">技巧</el-menu-item>
                        </el-menu-item-group>
                      </el-submenu>
      
                      <!-- SQL注入 -->
                      <el-submenu index="2">
                        <template slot="title">
                          <i class="el-icon-aim"></i>
                          <span>SQL注入</span>
                        </template>
                        <el-menu-item-group>
                          <el-menu-item index="2-0-1" @click="goToComponent('sqli0', '2-0-1')">漏洞原理</el-menu-item>
                        </el-menu-item-group>
                        
                        <el-submenu index="2-1">
                          <template slot="title">
                            <i class="el-icon-collection-tag"></i>
                            <span>分类</span>
                          </template>
                          <el-menu-item-group>
                            <el-menu-item index="2-1-1" @click="goToComponent('sqli1', '2-1-1')">数字型SQL注入</el-menu-item>
                          </el-menu-item-group>
                          <el-menu-item-group>
                            <el-menu-item index="2-1-2" @click="goToComponent('sqli2', '2-1-2')">字符型SQL注入</el-menu-item>
                          </el-menu-item-group>
                          <el-menu-item-group>
                            <el-menu-item index="2-1-3" @click="goToComponent('sqli3', '2-1-3')">联合注入</el-menu-item>
                          </el-menu-item-group>
                        </el-submenu>
                        
                        <el-submenu index="2-2">
                          <template slot="title">
                            <span>报错注入</span>
                          </template>
                          <el-menu-item-group>
                            <el-menu-item index="2-2-0" @click="goToComponent('sqli4', '2-2-0')">漏洞原理</el-menu-item>
                          </el-menu-item-group>
                          <el-submenu index="2-2-1">
                            <template slot="title">
                              <i class="el-icon-collection-tag"></i>
                              <span>分类</span>
                            </template>
                            <el-menu-item-group>
                              <el-menu-item index="2-2-1-1" @click="goToComponent('sqli4_1', '2-2-1-1')">extractvalue报错注入</el-menu-item>
                            </el-menu-item-group>
                            <el-menu-item-group>
                              <el-menu-item index="2-2-1-2" @click="goToComponent('sqli4_2', '2-2-1-2')">updatexml报错注入</el-menu-item>
                            </el-menu-item-group>
                          </el-submenu>
                        </el-submenu>
                        
                        <el-submenu index="2-3">
                          <template slot="title">
                            <span>盲注</span>
                          </template>
                          <el-menu-item-group>
                            <el-menu-item index="2-3-1" @click="goToComponent('sqli5', '2-3-1')">原理</el-menu-item>
                          </el-menu-item-group>
                          <el-submenu index="2-3-2">
                            <template slot="title">
                              <i class="el-icon-collection-tag"></i>
                              <span>分类</span>
                            </template>
                            <el-menu-item-group>
                              <el-menu-item index="2-3-2-1" @click="goToComponent('sqli5_1', '2-3-2-1')">时间盲注</el-menu-item>
                            </el-menu-item-group>
                            <el-menu-item-group>
                              <el-menu-item index="2-3-2-2" @click="goToComponent('sqli5_2', '2-3-2-2')">布尔盲注</el-menu-item>
                            </el-menu-item-group>
                          </el-submenu>
                        </el-submenu>
                        
                        <el-menu-item-group>
                          <el-menu-item index="2-1-7" @click="goToComponent('sqli7', '2-1-7')">二次注入</el-menu-item>
                        </el-menu-item-group>
                      </el-submenu>
      
                      <!-- XSS -->
                      <el-submenu index="3">
                        <template slot="title">
                          <i class="el-icon-position"></i>
                          <span>XSS</span>
                        </template>
                        <el-menu-item-group>
                          <el-menu-item index="3-1" @click="goToComponent('xssinfo', '3-1')">漏洞原理</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu index="3-2">
                          <template slot="title">
                            <i class="el-icon-collection-tag"></i>
                            <span>分类</span>
                          </template>
                          <el-menu-item-group>
                            <el-menu-item index="3-2-1" @click="goToComponent('Reflect_xss', '3-2-1')">反射型XSS</el-menu-item>
                            <el-menu-item index="3-2-2" @click="goToComponent('Store_xss', '3-2-2')">存储型XSS</el-menu-item>
                            <el-menu-item index="3-2-3" @click="goToComponent('Dom_xss', '3-2-3')">DOM型XSS</el-menu-item>
                          </el-menu-item-group>
                        </el-submenu>
                      </el-submenu>
      
                      <!-- XXE -->
                      <el-submenu index="4">
                        <template slot="title">
                          <i class="el-icon-arrow-left"></i>
                          <i class="el-icon-arrow-right"></i>
                          <span>XXE</span>
                        </template>
                        <el-menu-item-group>
                          <el-menu-item index="4-1" @click="goToComponent('xxeinfo', '4')">漏洞原理</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu index="4-2">
                          <template slot="title">
                            <i class="el-icon-collection-tag"></i>
                            <span>分类</span>
                          </template>
                          <el-menu-item-group>
                            <el-menu-item index="4-2-1" @click="goToComponent('xxe1', '4-2-1')">有回显</el-menu-item>
                            <el-menu-item index="4-2-2" @click="goToComponent('xxe2', '4-2-2')">无回显</el-menu-item>
                          </el-menu-item-group>
                        </el-submenu>
                      </el-submenu>
      
                      <!-- 反序列化 -->
                      <el-submenu index="5">
                        <template slot="title">
                          <i class="el-icon-sort"></i>
                          <span>反序列化</span>
                        </template>
                        <el-menu-item-group>
                          <el-menu-item index="5-1" @click="goToComponent('ser', '5-1')">漏洞原理</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu index="5-2">
                          <template slot="title">
                            <i class="el-icon-collection-tag"></i>
                            <span>分类</span>
                          </template>
                          <el-menu-item-group>
                            <el-menu-item index="5-2-1" @click="goToComponent('poplink', '5-2-1')">pop链</el-menu-item>
                          </el-menu-item-group>
                          <el-submenu index="5-2-0">
                            <template slot="title">
                              <span>字符串逃逸</span>
                            </template>
                            <el-menu-item-group>
                              <el-menu-item index="5-2-0-1" @click="goToComponent('strEscapeInfo', '5-2-0-1')">原理</el-menu-item>
                            </el-menu-item-group>
                            <el-submenu>
                              <template slot="title">
                                <i class="el-icon-collection-tag"></i>
                                <span>分类</span>
                              </template>
                              <el-menu-item index="5-2-2" @click="goToComponent('strEscape1', '5-2-2')">减少</el-menu-item>
                              <el-menu-item index="5-2-3" @click="goToComponent('strEscape2', '5-2-3')">增多</el-menu-item>
                            </el-submenu>
                          </el-submenu>
                          <el-menu-item-group>
                            <el-menu-item index="5-2-4" @click="goToComponent('wakeup', '5-2-4')">wakeup魔术方法绕过</el-menu-item>
                            <el-menu-item index="5-2-6" @click="goToComponent('session', '5-2-6')">session反序列化漏洞</el-menu-item>
                          </el-menu-item-group>
                        </el-submenu>
                      </el-submenu>
      
                      <!-- 命令执行 -->
                      <el-submenu index="6">
                        <template slot="title">
                          <i class="el-icon-finished"></i>
                          <span>命令执行</span>
                        </template>
                        <el-menu-item-group>
                          <el-menu-item index="6-1" @click="goToComponent('CmdInfo','6-1')">漏洞原理</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu>
                          <template slot="title">
                            <i class="el-icon-collection-tag"></i>
                            <span>分类</span>
                          </template>
                          <el-menu-item index="6-1-1" @click="goToComponent('Cmd1', '6-1-1')">绕过字符串过滤限制</el-menu-item>
                          <el-menu-item index="6-1-2" @click="goToComponent('Cmd2', '6-1-2')">无回显的命令执行</el-menu-item>
                          <el-menu-item index="6-1-3" @click="goToComponent('Cmd3', '6-1-3')">木马</el-menu-item>
                          <el-menu-item index="6-1-4" @click="goToComponent('Cmd4', '6-1-4')">反弹Shell</el-menu-item>
                        </el-submenu>
                      </el-submenu>
      
                      <!-- 文件上传 -->
                      <el-submenu index="7">
                        <template slot="title">
                          <i class="el-icon-upload"></i>
                          <span>任意文件上传</span>
                        </template>
                        <el-menu-item-group>
                          <el-menu-item index="7-1" @click="goToComponent('uploadinfo', '7-1')">漏洞原理</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu>
                          <template slot="title">
                            <i class="el-icon-collection-tag"></i>
                            <span>分类</span>
                          </template>
                          <el-menu-item index="7-2" @click="goToComponent('jsCheck', '7-2')">JavaScript检验绕过</el-menu-item>
                          <el-menu-item index="7-3" @click="goToComponent('mimeCheck', '7-3')">MIME类型检验绕过</el-menu-item>
                          <el-menu-item index="7-4" @click="goToComponent('sfcCheck', '7-4')">文件后缀黑名单检验绕过</el-menu-item>
                          <el-menu-item index="7-5" @click="goToComponent('tagCheck', '7-5')">PHP标签检验绕过</el-menu-item>
                          <el-menu-item index="7-6" @click="goToComponent('twice', '7-6')">二次渲染绕过</el-menu-item>
                        </el-submenu>
                      </el-submenu>
      
                      <!-- 文件下载 -->
                      <el-submenu index="8">
                        <template slot="title">
                          <i class="el-icon-download"></i>
                          <span>任意文件下载</span>
                        </template>
                        <el-menu-item-group>
                          <el-menu-item index="8-1" @click="goToComponent('dwld0', '8-1')">漏洞原理</el-menu-item>
                              <el-sub-menu>
                                                                                <template #title>
                                                                                        <el-icon>
                                                                                                <CollectionTag />
                                                                                        </el-icon>
                                                                                        <span>分类</span>
                                                                                </template>
                                                                                <el-menu-item
                                                                                        index="8-2" @click="goToComponent('dwld1', '8-2')">路径遍历</el-menu-item>
                                                                                <el-menu-item
                                                                                        index="8-3" @click="goToComponent('dwld2', '8-3')">未授权文件任意下载</el-menu-item>
                                                                                <el-menu-item
                                                                                        index="8-4" @click="goToComponent('dwld3', '8-4')">敏感文件获取</el-menu-item>
                                                                        </el-sub-menu> 
                        </el-menu-item-group>
                      </el-submenu>
                    </el-menu>
                  </el-col>
                </el-row>
              </el-scrollbar>
            </el-aside>
            <el-main style="margin-left: 100px;">
              <div v-if="loading" class="loading-text">加载中...</div>
              <component v-else :is="currentComponent" />
            </el-main>
          </el-container>
        </div>
      </template>
      
      <script>
      export default {
        data() {
          return {
            activeComponent: 'home1',
            asideActiveIndex: '1-1',
            loading: true,
            currentComponent: null,
            components: {
              home1: () => import('./Home1.vue'),
              infotip: () => import('@/components/InfoTip.vue'),
               sqli0: () => import('@/components/Sqlinfo0.vue'),
               sqli1: () => import('@/components/Sqlinfo1.vue'),
          sqli2: () => import('@/components/Sqlinfo2.vue'),
              sqli3: () => import('@/components/Sqlinfo3.vue'),
             sqli4: () => import('@/components/Sqlinfo4.vue'),
            sqli4_1: () => import('@/components/Sqlinfo4_1.vue'),
              sqli4_2: () => import('@/components/Sqlinfo4_2.vue'),
             sqli5_1: () => import('@/components/Sqlinfo5_1.vue'),
               sqli5_2: () => import('@/components/Sqlinfo5_2.vue'),
               sqli5_1: () => import('@/components/Sqlinfo5_1.vue'),
        sqli6: () => import('@/components/Sqlinfo6.vue'),
        sqli7: () => import('@/components/Sqlinfo7.vue'),
            xssinfo: () => import('@/components/XssInfo.vue'),
            Reflect_xss: () => import('@/components/Reflect_xss.vue'),
        //       Store_xss: () => import('@/components/Store_xss.vue'),
               Dom_xss: () => import('@/components/Dom_xss.vue'),
        //       xxeinfo: () => import('@/components/XXEInfo.vue'),
            xxe1: () => import('@/components/XXE1.vue'),
              xxe2: () => import('@/components/XXE2.vue'),
             ser: () => import('@/components/Serialize.vue'),
              poplink: () => import('@/components/popLink.vue'),
           strEscapeInfo: () => import('@/components/stringEscapeInfo.vue'),
            strEscape1: () => import('@/components/stringEscapeDec.vue'),
             strEscape2: () => import('@/components/stringEscapeInc.vue'),
             wakeup: () => import('@/components/wakeUp.vue'),
               session: () => import('@/components/session.vue'),
               CmdInfo: () => import('@/components/CmdInfo.vue'),
              Cmd1: () => import('@/components/Cmd1.vue'),
               Cmd2: () => import('@/components/Cmd2.vue'),
               Cmd3: () => import('@/components/Cmd3.vue'),
              Cmd4: () => import('@/components/Cmd4.vue'),
           uploadinfo: () => import('@/components/uploadInfo.vue'),
            jsCheck: () => import('@/components/Jscheck.vue'),
               mimeCheck: () => import('@/components/MIMECheck.vue'),
             sfcCheck: () => import('@/components/SfcCheck.vue'),
             tagCheck: () => import('@/components/phpTagCheck.vue'),
             twice: () => import('@/components/Twice.vue'),
              dwld0: () => import('@/components/Dwld0.vue'),
              dwld1: () => import('@/components/Dwld1.vue'),
              dwld2: () => import('@/components/Dwld2.vue')
            }
          }
        },
        mounted() {
          this.loadComponent()
        },
        watch: {
          activeComponent() {
            this.loadComponent()
          }
        },
        methods: {
          async loadComponent() {
            this.loading = true
            try {
              const component = await this.components[this.activeComponent]()
              this.currentComponent = component.default
            } catch (error) {
              console.error('组件加载失败:', error)
              this.currentComponent = null
            } finally {
              this.loading = false
            }
          },
          goToComponent(componentName, index) {
            this.activeComponent = componentName
            this.asideActiveIndex = index
          },
          handleOpen(key, keyPath) {
            console.log('菜单展开:', key, keyPath)
          },
          handleClose(key, keyPath) {
            console.log('菜单关闭:', key, keyPath)
          }
        }
      }
      </script>
      
      <style lang="less" scoped>
      ::-webkit-scrollbar {
  display: none;
}
      /* 新增背景样式 */
.main-bkg {
  height: 100vh;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: radial-gradient(ellipse at bottom, #020613 0%, #000c1a 70%, #000000 100%);
  position: relative;
  font-family: 'Cascadia Code', sans-serif;
  
  &::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(ellipse at center, rgba(0, 123, 255, 0.2) 0%, rgba(0, 0, 0, 0) 70%);
    animation: lightMove 20s linear infinite;
    z-index: -1;
  }

  .data-stream {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;

    span {
      position: absolute;
      width: 2px;
      height: 10px;
      background: rgba(0, 123, 255, 0.5);
      animation: streamMove linear infinite;
      opacity: 0.8;
    }

    /* 原有span位置配置 */
    @import '@/assets/styles/data-stream-positions.less';
  }
}

@keyframes lightMove {
  0% { transform: translate(-20%, -20%) rotate(0deg); }
  100% { transform: translate(20%, 20%) rotate(360deg); }
}

@keyframes streamMove {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100vh); }
}

      .common-layout {
        height: 100vh;
        overflow: hidden;
        
        .el-container {
          height: 100%;
          
          .el-aside {
            background-color: rgba(10, 17, 40, 0.8);
            border-right: 1px solid rgba(0, 123, 255, 0.2);
            transition: width 0.3s;
          }
        }
      }
      
      .cyber-scrollbar {
        height: 100%;
        
        /deep/ .el-scrollbar__wrap {
          overflow-x: hidden;
          padding-bottom: 15px;
        }
        
        /deep/ .el-scrollbar__bar {
          background-color: rgba(10, 25, 47, 0.5) !important;
          border: 1px solid rgba(0, 180, 255, 0.3) !important;
          
          &.is-vertical {
            width: 10px !important;
            .el-scrollbar__thumb {
              background: linear-gradient(135deg, #00b4ff, #0062ff) !important;
              border-radius: 5px !important;
            }
          }
          
          &.is-horizontal {
            height: 10px !important;
          }
        }
      }
      
      .el-menu-vertical-demo {
        background: transparent !important;
        border-right: none !important;
      
        /deep/ .el-submenu__title,
        /deep/ .el-menu-item {
          color: #d1e7ff !important;
          background: transparent !important;
          transition: all 0.3s;
          height: 48px;
          line-height: 48px;
          
          &:hover {
            color: #fff !important;
            background-color: rgba(0, 123, 255, 0.1) !important;
          }
          
          &.is-active {
            background: linear-gradient(90deg, rgba(0, 123, 255, 0.3), transparent) !important;
            border-left: 3px solid #007bff !important;
          }
        }
      
        /deep/ .el-submenu__title i,
        /deep/ .el-menu-item i {
          color: #6ab7ff !important;
          margin-right: 8px;
        }
      
        /deep/ .el-menu--inline {
          background-color: rgba(5, 12, 30, 0.5) !important;
          
          .el-menu-item {
            padding-left: 50px !important;
            &::after {
              content: attr(data-index);
              position: absolute;
              left: 20px;
              color: rgba(106, 183, 255, 0.5);
              font-size: 0.8rem;
            }
          }
        }
      
        /deep/ .el-menu-item-group__title {
          padding: 0;
          height: 1px;
          background: linear-gradient(90deg, transparent, rgba(0, 123, 255, 0.3), transparent);
          margin: 8px 0;
        }
      }
      
      .loading-text {
        color: #00b4ff;
        font-size: 18px;
        text-shadow: 0 0 10px rgba(0, 180, 255, 0.5);
        animation: pulse 1.5s infinite;
      }
      
      @keyframes pulse {
        0% { opacity: 0.6; }
        50% { opacity: 1; }
        100% { opacity: 0.6; }
      }
      
      @media (max-width: 1200px) {
        .el-aside {
          width: 260px !important;
          
          /deep/ .el-menu-item {
            font-size: 13px;
            padding-left: 35px !important;
            &::after {
              left: 15px !important;
            }
          }
          
          /deep/ .el-submenu__title {
            font-size: 14px;
          }
        }
        
        .el-main {
          margin-left: 50px !important;
        }
      }
      </style>